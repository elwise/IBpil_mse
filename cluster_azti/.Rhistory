gt() %>%
text_transform(
locations = cells_column_labels(columns = c(Period, indicator)),
fn = function(x) { x })
aux %>% filter(Rule == "HCR10") %>% select(-Rule) %>%
gt() %>%
text_transform(
locations = cells_column_labels(columns = vars(starts_with("REC"))),
fn = function(x) { x })
aux %>% filter(Rule == "HCR10") %>% select(-Rule) %>%
gt() %>%
text_transform(
locations = cells_column_labels(columns = starts_with("REC")),
fn = function(x) { x })
aux %>% filter(Rule == "HCR10") %>% select(-Rule) %>%
gt() %>%
text_transform(
locations = cells_column_labels(columns = 3),
fn = function(x) { x })
aux %>% filter(Rule == "HCR10") %>% select(-Rule) %>%
gt() %>%
text_transform(
locations = cells_column_labels(columns = "REClow_ASSnone"),
fn = function(x) { x })
aux %>% filter(Rule == "HCR10") %>% select(-Rule) %>%
gt()
aux %>% filter(Rule == "HCR10") %>% select(-Rule) %>%
gt() %>%
text_transform(
locations = cells_column_labels(columns = everything()),
fn = function(x) { x })
aux %>% filter(Rule == "HCR10") %>% select(-Rule) %>%
gt() %>%
tab_style(
locations = cells_column_labels(columns = everything()),style = list(cell_text(weight = "bold")))
aux %>% filter(Rule == "HCR10") %>% select(-Rule) %>%
gt() %>%
text_transform(
locations = cells_column_labels(columns = everything()),
fn = I)
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_if(is.numeric, ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\1/\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_style(
locations = cells_column_labels(columns = everything()),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_if(is.numeric, ~ sub(pattern = "REC\(.*\)_ASS\(.*\)", replacement = "\1/\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_style(
locations = cells_column_labels(columns = everything()),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_if(is.numeric, ~ sub(pattern = "REC\\(.*\\)_ASS\\(.*\\)", replacement = "\1/\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_style(
locations = cells_column_labels(columns = everything()),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_if(is.numeric, ~ sub(pattern = "REC\\(.*\\)_ASS\\(.*\\)", replacement = "\\1/\\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_style(
locations = cells_column_labels(columns = everything()),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_if(is.numeric, ~ sub(pattern = "REC\(.*\)_ASS\(.*\)", replacement = "\\1/\\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_style(
locations = cells_column_labels(columns = everything()),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_if(is.numeric, ~ sub(pattern = "REC\(.*\)_ASS\(.*\)", replacement = "\1/\2", x = .x, perl = TRUE)) %>%
I
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_if(is.numeric, ~ sub(pattern = "REC\(.*\)_ASS\(.*\)", replacement = "\1/\2", x = .x, perl = TRUE))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\1/\2", x = .x, perl = TRUE))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC\(.*\)_ASS\(.*\)", replacement = "\1/\2", x = .x, perl = TRUE))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC\\(.*\\)_ASS\\(.*\\)", replacement = "\1/\2", x = .x, perl = TRUE))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC\\(.*\\)_ASS\\(.*\\)", replacement = "\\1/\\2", x = .x, perl = TRUE))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1/\\2", x = .x, perl = TRUE)) %>%
head
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\U\\1 / \\U\\2", x = .x, perl = TRUE)) %>%
head
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_style(
locations = cells_column_labels(columns = everything()),
style = list(cell_text(weight = "bold")))
aux <-
df %>%
select(Rule = Rule,Period = period,Ass,Rec, B1plus = Median_B1plus, F = Median_F,Catch = Median_Catch,IAV= IAV1_Catch,
Closure = closure,"First year Blim"= firstyear_B1plus_Blim, "First year Blow" = firstyear_B1plus_Blow,
"Risk 1 Blim" = avg_P_B1plus_Blim, "Risk 1 Blow" = avg_P_B1plus_Blow,
"Risk 3 Blim" = max_P_B1plus_Blim,
"Risk 3 Blow" = max_P_B1plus_Blow) %>%
mutate_at(vars(starts_with("Risk")), ~ as.character(round(100 * .x, 1))) %>%
mutate_at(vars(Closure), ~ as.character(round(100 * .x, 0))) %>%
mutate_at(vars(starts_with("First")),  ~ as.character(round( .x, 0))) %>%
mutate_at(vars(B1plus,Catch, IAV), ~ as.character(round(.x/1000, 0))) %>%
mutate_at(vars(F), ~ as.character(round(.x, 3))) %>%
pivot_longer(cols = -c(Rule, Period, Rec, Ass), names_to='indicator') %>%
pivot_wider(names_from = c(Rec,Ass), id_cols=c(Rule, Period,indicator)) %>%
arrange(Rule, indicator, Period) %>%
select(1,Indicator = 2,3,4,7,5,8,6,9)%>%
as.data.frame()
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_style(
locations = cells_column_labels(columns = everything()),
style = list(cell_text(weight = "bold")))
aux <-
df %>%
select(Rule = Rule,Period = period,Ass,Rec, B1plus = Median_B1plus, F = Median_F,Catch = Median_Catch,IAV= IAV1_Catch,
Closure = closure,"First year Blim"= firstyear_B1plus_Blim, "First year Blow" = firstyear_B1plus_Blow,
"Risk 1 Blim" = avg_P_B1plus_Blim, "Risk 1 Blow" = avg_P_B1plus_Blow,
"Risk 3 Blim" = max_P_B1plus_Blim,
"Risk 3 Blow" = max_P_B1plus_Blow) %>%
mutate_at(vars(starts_with("Risk")), ~ as.character(round(100 * .x, 1))) %>%
mutate_at(vars(Closure), ~ as.character(round(100 * .x, 0))) %>%
mutate_at(vars(starts_with("First")),  ~ as.character(round( .x, 0))) %>%
mutate_at(vars(B1plus,Catch, IAV), ~ as.character(round(.x/1000, 0))) %>%
mutate_at(vars(F), ~ as.character(round(.x, 3))) %>%
pivot_longer(cols = -c(Rule, Period, Rec, Ass), names_to='indicator') %>%
pivot_wider(names_from = c(Rec,Ass), id_cols=c(Rule, Period,indicator)) %>%
arrange(Rule, indicator, Period) %>%
select(1,2,Indicator = 3,4,7,5,8,6,9)%>%
as.data.frame()
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_style(
locations = cells_column_labels(columns = everything()),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_spanner("Recruitment / Assessment", columns = 3:8) %>%
tab_style(
locations = cells_column_labels(columns = everything()),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_spanner("Recruitment / Assessment", columns = 3:8) %>%
tab_style(
locations = cells_column_spanners(columns = everything()),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
remotes::install_github("rstudio/gt")
remotes::install_github("rstudio/gt")
library(dplyr)
library(tidyr)
library(gt)
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
cat("\u2014")
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
mutate_at(vars(starts_with("REC")), ~ sub(pattern = "NA", replacement = "\u2014", x = .x)) %>%
gt() %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
mutate_at(vars(starts_with("REC")), ~ sub(pattern = "NA", replacement = "\u2014", x = .x)) %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
filter(! (period == "all") & Indicator %in% c("First year Blim", "First year Blow")) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
filter(! (Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
filter(!(Period == "all" & !Indicator %in% c("First year Blim", "First year Blow"))) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
filter(!(Indicator %in% c("First year Blim", "First year Blow") & Period == "all")) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
filter(
Period != "all" | (Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow"))
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow")) |
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt() %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow")) |
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt(groupname_col = Indicator) %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow")) |
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt(groupname_col = "Indicator") %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow")) |
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt(groupname_col = "Indicator") %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = c(cells_column_spanners(spanners = "rec_ass"),
cells_row_groups()),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow")) |
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt(groupname_col = "Indicator") %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow")) |
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt(groupname_col = "Indicator") %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow")) |
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt(groupname_col = "Indicator") %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))
gt::gtsave("psHCR10.png")
df <- read.table(file.path(res.dir,"stats.csv"), header=T, sep=";")
df$Rec <- ordered(df$Rec, c("REClow","REClowmed","RECmix"))
df$period <- ordered(df$period, c("initial", "short", "med","last","all"))
aux <-
df %>%
select(Rule = Rule,Period = period,Ass,Rec, B1plus = Median_B1plus, F = Median_F,Catch = Median_Catch,IAV= IAV1_Catch,
Closure = closure,"First year Blim"= firstyear_B1plus_Blim, "First year Blow" = firstyear_B1plus_Blow,
"Risk 1 Blim" = avg_P_B1plus_Blim, "Risk 1 Blow" = avg_P_B1plus_Blow,
"Risk 3 Blim" = max_P_B1plus_Blim,
"Risk 3 Blow" = max_P_B1plus_Blow) %>%
mutate_at(vars(starts_with("Risk")), ~ as.character(round(100 * .x, 1))) %>%
mutate_at(vars(Closure), ~ as.character(round(100 * .x, 0))) %>%
mutate_at(vars(starts_with("First")),  ~ as.character(round( .x, 0))) %>%
mutate_at(vars(B1plus,Catch, IAV), ~ as.character(round(.x/1000, 0))) %>%
mutate_at(vars(F), ~ as.character(round(.x, 3))) %>%
pivot_longer(cols = -c(Rule, Period, Rec, Ass), names_to='indicator') %>%
pivot_wider(names_from = c(Rec,Ass), id_cols=c(Rule, Period,indicator)) %>%
arrange(Rule, indicator, Period) %>%
select(1,2,Indicator = 3,4,7,5,8,6,9)%>%
as.data.frame()
aux %>%
filter(Rule == "HCR10") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow")) |
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt(groupname_col = "Indicator") %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))%>%
gt::gtsave("psHCR10.png")
aux %>%
filter(Rule == "HCR9") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow")) |
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt(groupname_col = "Indicator") %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))%>%
gt::gtsave("psHCR9.png")
aux %>%
filter(Rule == "HCR8") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow")) |
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt(groupname_col = "Indicator") %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))%>%
gt::gtsave("psHCR8.png")
aux %>%
filter(Rule == "HCR7") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow")) |
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt(groupname_col = "Indicator") %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))%>%
gt::gtsave("psHCR7.png")
aux %>%
filter(Rule == "HCR0") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow")) |
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt(groupname_col = "Indicator") %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))%>%
gt::gtsave("psHCR0.png")
aux %>%
filter(Rule == "HCR11") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow")) |
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt(groupname_col = "Indicator") %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))%>%
gt::gtsave("psHCR11.png")
aux %>%
filter(Rule == "HCR13") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow")) |
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt(groupname_col = "Indicator") %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))%>%
gt::gtsave("psHCR13.png")
aux %>%
filter(Rule == "HCR14") %>% select(-Rule) %>%
filter(
(Period != "all" & !Indicator %in% c("First year Blim", "First year Blow")) |
(Period == "all" & Indicator %in% c("First year Blim", "First year Blow"))
) %>%
mutate_at(vars(starts_with("REC")), replace_na, "\u2014") %>%
rename_at(vars(starts_with("REC")), ~ sub(pattern = "REC(.*)_ASS(.*)", replacement = "\\1 / \\2", x = .x, perl = TRUE)) %>%
gt(groupname_col = "Indicator") %>%
tab_spanner("Recruitment / Assessment", columns = 3:8, id = "rec_ass") %>%
tab_style(
locations = cells_column_spanners(spanners = "rec_ass"),
style = list(cell_text(weight = "bold")))%>%
gt::gtsave("psHCR14.png")
